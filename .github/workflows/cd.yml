name: CD
on:
  push:
    branches: 
      - 'main/**'

jobs:
  buld_and_deploy:
    name: Build and Deploy to GitHub pages
    runs-on: ubuntu-18.04

    steps:
    - name: checkout to branch
      uses: actions/checkout@v1
    
    - name: push to GitHub pages
      uses: enriikke/gatsby-gh-pages-action@v2
      with:
        access-token: ${{ secrets.GITHUB_GH_PAGES_SECRET }}
        deploy-branch: gh-pages
